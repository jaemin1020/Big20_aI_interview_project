# ğŸ› [Troubleshooting] ì´ë ¥ì„œ ì—…ë¡œë“œ API 422 Unprocessable Entity ì—ëŸ¬

## ğŸš¨ ì—ëŸ¬ í˜„ìƒ

ì´ë ¥ì„œ(PDF) ì—…ë¡œë“œ í›„ ë¶„ì„ ìƒíƒœë¥¼ í´ë§í•  ë•Œ, í”„ë¡ íŠ¸ì—”ë“œ ì½˜ì†” ì°½ì— ë‹¤ìŒê³¼ ê°™ì€ 422 ì—ëŸ¬ ë¡œê·¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.

**ì—ëŸ¬ ë¡œê·¸:**

> `Request failed with status code 422`  
> `at async poll (ResumePage.jsx:82:26)`  
> `at async handleUpload (ResumePage.jsx:109:1)`

---

## ğŸ” ì˜¤ë¥˜ ì›ì¸: ì‘ë‹µ í•„ë“œëª… ë¶ˆì¼ì¹˜ (`id` vs `resume_id`)

### ğŸ“Œ ë¬¸ì œ íë¦„

```
1. ResumePage.jsx â†’ uploadResume(file) í˜¸ì¶œ
2. ë°±ì—”ë“œê°€ { "resume_id": 5, "status": "processing", ... } ë°˜í™˜
3. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ uploadData.id ë¡œ êº¼ëƒ„ â†’ undefined
4. getResume(undefined) í˜¸ì¶œ â†’ GET /api/resumes/undefined
5. ë°±ì—”ë“œê°€ 422 (ë˜ëŠ” 404) ë°˜í™˜
```

### ğŸ“Œ ì›ì¸ ìƒì„¸

**ë°±ì—”ë“œ (`backend-core/routes/resumes.py`)** ì˜ ì—…ë¡œë“œ ì„±ê³µ ì‘ë‹µ:

```python
return {
    "resume_id": resume.id,      # â† í•„ë“œëª…ì´ resume_id
    "file_name": file.filename,
    "file_size": file_size,
    "status": "processing",
    "message": "ì´ë ¥ì„œ ì—…ë¡œë“œ ì™„ë£Œ. íŒŒì‹± ì¤‘ì…ë‹ˆë‹¤."
}
```

**í”„ë¡ íŠ¸ì—”ë“œ (`frontend/src/pages/landing/ResumePage.jsx:73`)** ì˜ ì‘ë‹µ ì²˜ë¦¬:

```javascript
const uploadData = await uploadResume(file);
const resumeId = uploadData.id;   // âŒ 'id' í•„ë“œëŠ” ì—†ìŒ! â†’ undefined
```

> ë°±ì—”ë“œëŠ” `resume_id` ë¡œ ë°˜í™˜í•˜ëŠ”ë°, í”„ë¡ íŠ¸ì—”ë“œëŠ” `id` ë¡œ ì½ìœ¼ë¯€ë¡œ `resumeId` ê°€ `undefined` ê°€ ë©ë‹ˆë‹¤.  
> ì´í›„ `getResume(undefined)` ë¥¼ í˜¸ì¶œí•˜ë©´ ìš”ì²­ URLì´ `/api/resumes/undefined` ê°€ ë˜ì–´ ë°±ì—”ë“œê°€ 422 / 404 ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

## ğŸ› ï¸ í•´ê²° ë°©ë²• (ì˜µì…˜ A: í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •)

**`ResumePage.jsx`** ì—ì„œ í•„ë“œëª…ì„ `id` â†’ `resume_id` ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.

### ìˆ˜ì • ì „ (Before)

```javascript
// ResumePage.jsx - Line 73
const uploadData = await uploadResume(file);
const resumeId = uploadData.id;   // âŒ undefined ê°€ ë¨
```

### ìˆ˜ì • í›„ (After)

```javascript
// ResumePage.jsx - Line 73
const uploadData = await uploadResume(file);
const resumeId = uploadData.resume_id; // âœ… ë°±ì—”ë“œ ì‘ë‹µ í•„ë“œëª…ê³¼ ì¼ì¹˜
```

---

## ğŸ“ ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `frontend/src/pages/landing/ResumePage.jsx` | ì´ë ¥ì„œ ì—…ë¡œë“œ UI ë° í´ë§ ë¡œì§ (ìˆ˜ì • ëŒ€ìƒ) |
| `backend-core/routes/resumes.py` | ì´ë ¥ì„œ ì—…ë¡œë“œ API, `resume_id` ë¡œ ì‘ë‹µ ë°˜í™˜ |
| `frontend/src/api/interview.js` | `uploadResume`, `getResume` API í•¨ìˆ˜ ì •ì˜ |

---

## âœ… ì ìš© í›„ ê²€ì¦ ì ˆì°¨

1. **í”„ë¡ íŠ¸ì—”ë“œ ì¬ì‹œì‘** (`npm run dev`)
2. PDF íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  **ë¸Œë¼ìš°ì € ì½˜ì†” â†’ ë„¤íŠ¸ì›Œí¬ íƒ­** ì—ì„œ í™•ì¸
3. ì—…ë¡œë“œ ìš”ì²­: `POST /api/resumes/upload` â†’ 200 OK ì‘ë‹µ í™•ì¸
4. í´ë§ ìš”ì²­: `GET /api/resumes/{ìˆ«ì}` â†’ 404/422 ì—†ì´ ì •ìƒ ì‘ë‹µ í™•ì¸
5. ì´ë ¥ì„œ ë¶„ì„ ì™„ë£Œ í›„ "ì§€ì› ì •ë³´ í™•ì¸" í™”ë©´ìœ¼ë¡œ ì „í™˜ë˜ë©´ ì„±ê³µ

---

## ğŸ”— ê´€ë ¨ ì˜¤ë¥˜ ë¬¸ì„œ

- [01.404ì˜¤ë¥˜-ì£¼ì†Œë¶ˆì¼ì¹˜.md](./01.404ì˜¤ë¥˜-ì£¼ì†Œë¶ˆì¼ì¹˜.md) â€“ ë™ì¼ ì´ë ¥ì„œ ì—…ë¡œë“œ íë¦„ì—ì„œ ë°œìƒí•œ `/api` prefix ëˆ„ë½ ë¬¸ì œ

---

*ì‘ì„±ì¼: 2026-02-28 / ë‹´ë‹¹ì: AI Assistant*
