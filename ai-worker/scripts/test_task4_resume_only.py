
import sys
import os

# /app 경로 추가
sys.path.append("/app")

from tasks.question_generator import QuestionGenerator

def test_task4_resume_only():
    print("=" * 60)
    print("🚀 [Task 4 Test] DB 없이 이력서만으로 질문 생성")
    print("Candidate: Choi Seung-woo (Security Engineer)")
    print("=" * 60)

    gen = QuestionGenerator()

    # --- [복사-붙여넣기 영역] ---
    name = "최승우"
    position = "보안엔지니어"

    education = """
    세종대학교 정보보호학 학사 (2019.03 - 2025.02)
    중앙고등학교 인문계 (2016.03 - 2019.02)
    """

    career = """
    경력 한국인터넷진흥원(KISA), 서울 — 인턴
    2023년 7월 - 2023년 8월
    공공기관 보안 관제 시스템 모니터링 보조 및 일일 위협 분석 보고서 작성 지원 업무를 수행하였습니다. 보안 취약점 점검 스크립트의 기초 설계를 도우며 실무적인 방어 기제를 학습했습니다.
    """

    projects = """
    오픈소스 기반 침입 탐지 시스템(IDS) 구축 프로젝트
    Snort를 활용하여 학내 가상 네트워크망의 비정상 트래픽을 실시간으로 탐지하고 차단하는 로그 분석 자동화 툴을 제작하였습니다. 리눅스 환경에서 네트워크 패킷을 수집하고 규칙 기반의 탐지 정책을 설정하여 SQL 인젝션 및 DDoS 공격 시도를 90% 이상 식별해냈습니다.
    """

    skills_and_certs = """
    기술: Network 패킷 분석(Wireshark), 리눅스 시스템 관리, 방화벽 설정 및 운영, 기초 악성코드 분석
    자격증: 정보보안기사, 리눅스마스터 2급, 네트워크관리사 2급
    """

    self_intro_and_goals = """
    [성장과정] 정직함이 최고의 방어막이라는 가르침 아래 성장했습니다. 중학생 시절 개인 정보 유출로 인한 지인의 피해를 목격하며 사이버 보안의 중요성을 체감했고 이는 자연스럽게 정보보호학과 진학으로 이어졌습니다. 대학 재학 중에는 단순한 기술 습득을 넘어 보안 사고가 발생했을 때 사회에 미치는 타격을 최소화해야 한다는 사명감을 가졌습니다. 이러한 책임감은 제가 보안 전문가로서 가져야 할 가장 중요한 윤리 의식과 전문성의 기반이 되었습니다. 어떤 상황에서도 원칙을 지키며 안전한 디지털 세상을 만드는 데 기여하고 싶습니다.
    [성격의 장단점]저는 매우 꼼꼼하고 규칙 준수를 철저히 하는 성격입니다. 보안 정책을 설정하거나 로그를 분석할 때 아주 작은 이상 징후도 놓치지 않으려 노력하며 이는 대규모 사고를 미연에 방지하는 강점이 됩니다. 하지만 이러한 신중함 때문에 빠른 결단을 내려야 하는 순간에 다소 시간이 걸린다는 단점이 있습니다. 이를 해결하기 위해 긴급 상황별 대응 매뉴얼을 미리 숙지하고 모의 훈련에 반복적으로 참여하여 판단 근거를 신속하게 확보하는 연습을 하고 있습니다. 덕분에 현재는 신속함과 정확함 사이의 적절한 균형을 유지하며 업무에 임하고 있습니다.
    [지원동기] 안랩은 대한민국 보안의 자부심이자 가장 신뢰받는 기업입니다. 저는 안랩의 통합 보안 솔루션이 수많은 기업과 개인의 자산을 지켜내는 과정을 보며 보안 엔지니어로서의 꿈을 키워왔습니다. 최신 위협인 랜섬웨어 및 APT 공격 대응에 깊은 관심을 가지고 있으며 대학 시절 진행한 악성코드 행위 기반 분석 프로젝트 경험을 안랩의 시스템에 녹여내고 싶습니다. 끊임없이 진화하는 해킹 기법에 맞서 가장 안전한 네트워크 환경을 구축하고자 하는 안랩의 비전에 저의 기술적 열정과 성실함을 보태어 시너지를 내고 싶어 지원하게 되었습니다.
    [입사후포부] 입사 초기에는 안랩의 위협 분석 시스템을 빠르게 익히고 실시간 모니터링 업무에서 무결점의 탐지율을 유지하는 데 집중하겠습니다. 3년 이내에는 지능형 위협 탐지 분야에서 머신러닝을 활용한 자동 탐지 알고리즘 최적화 프로젝트를 성공적으로 수행하고 싶습니다. 이후에는 국내뿐 아니라 글로벌 보안 표준을 선도할 수 있는 보안 아키텍처를 설계하는 전문가로 성장하겠습니다. 고객이 안심하고 서비스를 이용할 수 있도록 보이지 않는 곳에서 가장 견고한 방패 역할을 수행하며 안랩이 보안 시장의 초격차를 유지하는 데 핵심적인 인재가 되겠습니다.
    """
    # ---------------------------

    # 항목들을 하나의 텍스트로 합쳐서 전달
    resume_summary = f"""
    [기본정보] 이름: {name}, 지원직무: {position}
    [학력] {education}
    [경력] {career}
    [프로젝트] {projects}
    [기술/자격] {skills_and_certs}
    [자기소개/포부] {self_intro_and_goals}
    """

    print(f"\n📄 [Resume Content Analyzed]:\n{resume_summary.strip()}")
    print("\n" + "-"*40)
    print("🔧 Generating 5 specific questions from resume...")
    print("-" * 40)

    try:
        questions = gen.generate_questions_from_resume(
            resume_summary=resume_summary,
            count=5
        )

        print("\n✨ [Generated Interview Questions]:")
        for i, q in enumerate(questions, 1):
            print(f"{i}. {q}")

    except Exception as e:
        print(f"❌ Error: {e}")

    print("\n" + "=" * 60)

if __name__ == "__main__":
    test_task4_resume_only()
